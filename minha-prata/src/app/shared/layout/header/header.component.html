<header class="header">
  <div class="container">
    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" (click)="toggleMobileMenu()" (keyup.enter)="toggleMobileMenu()"
      (keyup.space)="toggleMobileMenu()"
      [attr.aria-label]="isMobileMenuOpen ? 'Fechar menu de navegação' : 'Abrir menu de navegação'"
      [attr.aria-expanded]="isMobileMenuOpen" [attr.aria-controls]="isMobileMenuOpen ? 'mobile-navigation' : null"
      type="button">
      <i class="fa-solid fa-bars" aria-hidden="true"></i>
      <span class="visually-hidden">Menu</span>
    </button>

    <!-- Logo -->
    <button class="logo" (click)="onLogoClick()" (keyup.enter)="onLogoClick()" (keyup.space)="onLogoClick()"
      aria-label="Minha Prata - Voltar para página inicial" type="button">
      MinhaPrata
    </button>

    <!-- Desktop Navigation -->
    <nav class="desktop-nav" aria-label="Navegação principal">
      <button *ngFor="let category of categories; trackBy: trackByCategory" class="nav-button"
        [class.active]="category.slug === activeCategory" (click)="onCategorySelect(category)"
        (keyup.enter)="onCategorySelect(category)" (keyup.space)="onCategorySelect(category)"
        [attr.aria-current]="category.slug === activeCategory ? 'page' : null"
        [attr.aria-label]="'Filtrar produtos por ' + category.name" type="button">
        <i [class]="category.icon" aria-hidden="true"></i>
        <span>{{ category.name }}</span>
      </button>
    </nav>

    <!-- User Actions -->
    <div class="user-cart" aria-label="Ações do usuário">
      <button id="userBtn" (click)="onUserClick()" (keyup.enter)="onUserClick()" (keyup.space)="onUserClick()"
        aria-label="Minha conta" type="button">
        <i class="fa-regular fa-user" aria-hidden="true"></i>
        <span class="visually-hidden">Minha conta</span>
      </button>
      <app-cart-icon></app-cart-icon>
    </div>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-nav-overlay" [class.active]="isMobileMenuOpen" (click)="toggleMobileMenu()"
      (keyup.enter)="toggleMobileMenu()" (keyup.space)="toggleMobileMenu()" tabindex="0" role="button"
      [attr.aria-label]="isMobileMenuOpen ? 'Fechar menu de navegação' : null" [attr.aria-hidden]="!isMobileMenuOpen">
      <nav class="mobile-nav" (click)="$event.stopPropagation()" id="mobile-navigation" aria-label="Navegação mobile">
        <button class="mobile-nav-close" (click)="toggleMobileMenu()" (keyup.enter)="toggleMobileMenu()"
          (keyup.space)="toggleMobileMenu()" aria-label="Fechar menu" type="button">
          <i class="fa-solid fa-times" aria-hidden="true"></i>
          <span class="visually-hidden">Fechar menu</span>
        </button>

        <div class="mobile-nav-content">
          <button *ngFor="let category of categories; trackBy: trackByCategory" class="mobile-nav-button"
            [class.active]="category.slug === activeCategory" (click)="onMobileCategorySelect(category)"
            (keyup.enter)="onMobileCategorySelect(category)" (keyup.space)="onMobileCategorySelect(category)"
            [attr.aria-current]="category.slug === activeCategory ? 'page' : null" type="button">
            <i [class]="category.icon" aria-hidden="true"></i>
            <span>{{ category.name }}</span>
          </button>
        </div>
      </nav>
    </div>
  </div>
</header>