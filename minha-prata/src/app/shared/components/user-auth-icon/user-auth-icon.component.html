<div class="user-auth-icon">
  <!-- Estado: Não autenticado -->
  <div *ngIf="!authState.isAuthenticated" class="auth-state">
    <button (click)="handleClick()" class="auth-button" aria-label="Fazer login">
      <i class="fas fa-user"></i>
    </button>
  </div>

  <!-- Estado: Autenticado -->
  <div *ngIf="authState.isAuthenticated && authState.user" class="auth-state authenticated">
    <div class="user-menu">
      <button (click)="toggleDropdown()" class="user-button" aria-label="Menu do usuário">
        <img [src]="authState.user.avatar || 'https://via.placeholder.com/32'" [alt]="authState.user.name"
          class="user-avatar">
        <span class="user-name">{{ getFirstName() }}</span>
        <i class="fas fa-chevron-down dropdown-arrow"></i>

        <!-- Badge de notificação (opcional) -->
        <!-- <span class="user-badge" *ngIf="hasNotifications">3</span> -->
      </button>

      <!-- Menu dropdown -->
      <div class="user-dropdown" [class.show]="isDropdownOpen">
        <a routerLink="/user/profile" class="dropdown-item" (click)="closeDropdown()">
          <i class="fas fa-user"></i>
          Meu Perfil
        </a>
        <a routerLink="/user/orders" class="dropdown-item" (click)="closeDropdown()">
          <i class="fas fa-shopping-bag"></i>
          Meus Pedidos
          <!-- <span class="notification-badge">3</span> -->
        </a>
        <a routerLink="/user/settings" class="dropdown-item" (click)="closeDropdown()">
          <i class="fas fa-cog"></i>
          Configurações
        </a>
        <div class="dropdown-divider"></div>
        <button (click)="logout()" class="dropdown-item logout">
          <i class="fas fa-sign-out-alt"></i>
          Sair
        </button>
      </div>
    </div>
  </div>

  <!-- Estado: Carregando -->
  <div *ngIf="authState.isLoading" class="auth-state loading">
    <div class="loading-spinner">
      <i class="spinner"></i>
    </div>
  </div>
</div>