<div class="product-list-admin">
  <!-- Cabe√ßalho -->
  <div class="admin-header">
    <div class="header-content">
      <h1 class="page-title">Gerenciar Produtos</h1>
      <p class="page-subtitle">Gerencie seu cat√°logo de produtos</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" routerLink="/admin/products/new">
        <span class="btn-icon">‚ûï</span>
        Novo Produto
      </button>
    </div>
  </div>

  <!-- Barra de Ferramentas -->
  <div class="toolbar">
    <!-- Busca -->
    <div class="search-box">
      <div class="search-input-wrapper">
        <span class="search-icon">üîç</span>
        <input #searchInputRef type="text" [value]="searchInput()" (input)="searchInput.set($any($event.target).value)"
          (keyup.enter)="onSearchChange()" placeholder="Buscar produtos..." class="search-input">
        <button *ngIf="searchInput()" class="clear-search" (click)="searchInput.set(''); onSearchChange()">
          ‚úï
        </button>
      </div>
    </div>

    <!-- Controles -->
    <div class="toolbar-controls">
      <button class="btn btn-outline" (click)="showFilters.set(!showFilters())">
        <span class="btn-icon">üéõÔ∏è</span>
        Filtros
      </button>

      <button class="btn btn-outline" (click)="loadProducts()" [disabled]="isLoading()">
        <span class="btn-icon">üîÑ</span>
        Atualizar
      </button>
    </div>
  </div>

  <!-- Filtros Avan√ßados -->
  <div class="filters-panel" *ngIf="showFilters()">
    <app-product-filters [filters]="filters()" [categories]="categories()"
      (filtersChange)="filters.set($event); applyFilters()" (clear)="clearFilters()">
    </app-product-filters>
  </div>

  <!-- A√ß√µes em Lote -->
  <div class="bulk-actions-panel" *ngIf="selectedProducts().length > 0">
    <app-product-bulk-actions [selectedCount]="selectedProducts().length" [isLoading]="isBulkActionLoading()"
      (action)="executeBulkAction($event)">
    </app-product-bulk-actions>
  </div>

  <!-- Conte√∫do Principal -->
  <div class="content-area">
    <!-- Loading State -->
    <div *ngIf="isLoading()" class="loading-state">
      <div class="loading-spinner"></div>
      <p>Carregando produtos...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading() && products().length === 0" class="empty-state">
      <div class="empty-icon">üì¶</div>
      <h3>Nenhum produto encontrado</h3>
      <p>N√£o encontramos produtos com os filtros atuais.</p>
      <button class="btn btn-primary" (click)="clearFilters()">
        Limpar Filtros
      </button>
    </div>

    <!-- Lista de Produtos -->
    <div *ngIf="!isLoading() && products().length > 0" class="products-container">
      <!-- Cabe√ßalho da Tabela -->
      <div class="table-header">
        <div class="table-row header-row">
          <div class="table-cell select-cell">
            <label class="checkbox-wrapper">
              <input type="checkbox" [checked]="isAllSelected()" (change)="toggleSelectAll()"
                [indeterminate]="isSomeSelected()">
              <span class="checkmark"></span>
            </label>
          </div>
          <div class="table-cell product-cell">Produto</div>
          <div class="table-cell category-cell">Categoria</div>
          <div class="table-cell price-cell">Pre√ßo</div>
          <div class="table-cell stock-cell">Estoque</div>
          <div class="table-cell status-cell">Status</div>
          <div class="table-cell actions-cell">A√ß√µes</div>
        </div>
      </div>

      <!-- Lista de Produtos -->
      <div class="table-body">
        <div *ngFor="let product of products()" class="table-row product-row"
          [class.selected]="selectedProducts().includes(product.id)">

          <!-- Sele√ß√£o -->
          <div class="table-cell select-cell">
            <label class="checkbox-wrapper">
              <input type="checkbox" [checked]="selectedProducts().includes(product.id)"
                (change)="toggleProductSelection(product.id)">
              <span class="checkmark"></span>
            </label>
          </div>

          <!-- Informa√ß√µes do Produto -->
          <div class="table-cell product-cell">
            <app-product-card-admin [product]="product" [selected]="selectedProducts().includes(product.id)">
            </app-product-card-admin>
          </div>

          <!-- Categoria -->
          <div class="table-cell category-cell">
            <span class="category-badge">
              {{ product.category.name }}
            </span>
          </div>

          <!-- Pre√ßo -->
          <div class="table-cell price-cell">
            <div class="price-display">
              <span class="current-price">{{ product.price | currency:'BRL' }}</span>
            </div>
          </div>

          <!-- Estoque -->
          <div class="table-cell stock-cell">
            <div class="stock-display">
              <span class="stock-quantity">{{ product.stockQuantity }}</span>
              <span class="stock-label">unidades</span>
            </div>
          </div>

          <!-- Status -->
          <div class="table-cell status-cell">
            <span class="status-badge" [class]="getStockStatusClass(product)">
              {{ getStockStatusText(product) }}
            </span>
          </div>

          <!-- A√ß√µes -->
          <div class="table-cell actions-cell">
            <div class="action-buttons">
              <button class="btn btn-text btn-primary" [routerLink]="['/admin/products/edit', product.id]"
                title="Editar produto">
                <span class="btn-icon">‚úèÔ∏è</span>
              </button>

              <button class="btn btn-text btn-danger" (click)="deleteProduct(product)" title="Excluir produto">
                <span class="btn-icon">üóëÔ∏è</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagina√ß√£o -->
    <div *ngIf="!isLoading() && products().length > 0" class="pagination-container">
      <div class="pagination-info">
        Mostrando {{ products().length }} de {{ pagination().totalItems }} produtos
      </div>

      <div class="pagination-controls">
        <button class="btn btn-outline" (click)="goToPage(pagination().currentPage - 1)"
          [disabled]="pagination().currentPage === 1">
          ‚Äπ Anterior
        </button>

        <div class="page-numbers">
          <span class="page-info">
            P√°gina {{ pagination().currentPage }} de {{ pagination().totalPages }}
          </span>
        </div>

        <button class="btn btn-outline" (click)="goToPage(pagination().currentPage + 1)"
          [disabled]="pagination().currentPage === pagination().totalPages">
          Pr√≥xima ‚Ä∫
        </button>
      </div>

      <div class="page-size-selector">
        <label>Itens por p√°gina:</label>
        <select [value]="pagination().pageSize" (change)="changePageSize($any($event.target).value)">
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
        </select>
      </div>
    </div>
  </div>
</div>