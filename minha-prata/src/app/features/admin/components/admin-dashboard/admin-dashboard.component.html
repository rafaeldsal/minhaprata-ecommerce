<div class="admin-dashboard">
  <div class="dashboard-header">
    <h1>Painel Administrativo</h1>
    <div class="user-info">
      <span>Bem-vindo, {{ authService.getCurrentUser()?.name }}</span>
      <span class="role-badge" [class.admin]="userRole === 'admin'">
        {{ userRole === 'admin' ? 'Administrador' : 'Cliente' }}
      </span>
      <button *ngIf="isDevelopment" class="btn btn-outline-secondary btn-sm" (click)="simulateRoleChange()"
        title="Apenas para testes de desenvolvimento">
        Simular Troca de Role
      </button>
    </div>
  </div>

  <!-- Cards de EstatÃ­sticas -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">ğŸ“¦</div>
      <div class="stat-info">
        <h3>{{ stats.totalProducts }}</h3>
        <p>Produtos</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ“</div>
      <div class="stat-info">
        <h3>{{ stats.totalCategories }}</h3>
        <p>Categorias</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ‘¥</div>
      <div class="stat-info">
        <h3>{{ stats.totalUsers }}</h3>
        <p>UsuÃ¡rios</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">ğŸ›’</div>
      <div class="stat-info">
        <h3>{{ stats.totalOrders }}</h3>
        <p>Pedidos</p>
      </div>
    </div>
  </div>

  <!-- MÃ³dulos Administrativos -->
  <div class="admin-modules">
    <h2>MÃ³dulos Administrativos</h2>

    <div class="modules-grid">
      <!-- Gerenciar Produtos -->
      <div class="module-card" *appHasPermission="'canManageProducts'">
        <div class="module-icon">ğŸ“¦</div>
        <div class="module-content">
          <h3>Gerenciar Produtos</h3>
          <p>Adicione, edite ou remova produtos do catÃ¡logo</p>
          <a routerLink="/admin/products" class="btn btn-primary">Acessar</a>
        </div>
      </div>

      <!-- Gerenciar Categorias -->
      <div class="module-card" *appHasPermission="'canManageCategories'">
        <div class="module-icon">ğŸ“</div>
        <div class="module-content">
          <h3>Gerenciar Categorias</h3>
          <p>Organize as categorias de produtos</p>
          <a routerLink="/admin/categories" class="btn btn-primary">Acessar</a>
        </div>
      </div>

      <!-- Gerenciar UsuÃ¡rios -->
      <div class="module-card" *appHasPermission="'canManageUsers'">
        <div class="module-icon">ğŸ‘¥</div>
        <div class="module-content">
          <h3>Gerenciar UsuÃ¡rios</h3>
          <p>Visualize e gerencie usuÃ¡rios do sistema</p>
          <a routerLink="/admin/users" class="btn btn-primary">Acessar</a>
        </div>
      </div>

      <!-- Analytics -->
      <div class="module-card" *appHasPermission="'canViewAnalytics'">
        <div class="module-icon">ğŸ“Š</div>
        <div class="module-content">
          <h3>Analytics</h3>
          <p>RelatÃ³rios e estatÃ­sticas de vendas</p>
          <button class="btn btn-primary" disabled>Em Breve</button>
        </div>
      </div>
    </div>

    <!-- Mensagem para usuÃ¡rios sem permissÃµes -->
    <div *ngIf="!permissions.canAccessAdminPanel" class="alert alert-warning">
      <h4>âš ï¸ Acesso Limitado</h4>
      <p>VocÃª nÃ£o tem permissÃµes completas para acessar todos os mÃ³dulos administrativos.</p>
    </div>
  </div>

  <!-- Debug: Mostrar permissÃµes atuais -->
  <div class="debug-section" *ngIf="userRole === 'admin'">
    <h4>Debug - PermissÃµes Atuais:</h4>
    <pre>{{ permissions | json }}</pre>
  </div>
</div>