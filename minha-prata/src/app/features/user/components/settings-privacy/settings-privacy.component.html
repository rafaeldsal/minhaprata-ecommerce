<div class="settings-section">
  <div class="settings-section__header">
    <h2 class="settings-section__title">Privacidade e Prefer√™ncias</h2>
    <button class="btn btn--outline" (click)="resetToDefaults()">
      <span class="btn__icon">üîÑ</span>
      Restaurar Padr√µes
    </button>
  </div>

  <p class="settings-description">
    Controle como suas informa√ß√µes s√£o utilizadas para melhorar sua experi√™ncia de compras.
    Sua privacidade e prefer√™ncias s√£o importantes para n√≥s.
  </p>

  <form [formGroup]="privacyForm" class="settings-form">

    <!-- üõí Dados de Compras e Perfil -->
    <div class="privacy-category">
      <h3 class="privacy-category__title">üõí Dados de Compras e Perfil</h3>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Mostrar hist√≥rico de compras no perfil</span>
            <span class="toggle-description">
              Exibir seus pedidos anteriores em seu perfil (apenas voc√™ pode ver)
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="showPurchaseHistory">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Lista de desejos p√∫blica</span>
            <span class="toggle-description">
              Permitir que outros vejam seus produtos favoritados (em desenvolvimento)
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="showWishlist">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Ocultar valores dos pedidos</span>
            <span class="toggle-description">
              N√£o mostrar pre√ßos no hist√≥rico de pedidos (apenas valores totais)
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="hideOrderPrices">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>
    </div>

    <!-- üìß Marketing e Recomenda√ß√µes -->
    <div class="privacy-category">
      <h3 class="privacy-category__title">üìß Recomenda√ß√µes e Comunica√ß√µes</h3>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Recomenda√ß√µes personalizadas</span>
            <span class="toggle-description">
              {{ getRecommendationDescription() }}
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="personalizedRecommendations">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Alertas de queda de pre√ßo</span>
            <span class="toggle-description">
              Notificar quando produtos da sua lista de desejos ficarem mais baratos
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="priceDropNotifications">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Lembretes de carrinho abandonado</span>
            <span class="toggle-description">
              Enviar lembretes quando voc√™ deixar produtos no carrinho sem finalizar
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="abandonedCartReminders">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Solicita√ß√µes de avalia√ß√£o</span>
            <span class="toggle-description">
              Lembrar de avaliar produtos ap√≥s a compra
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="productReviewReminders">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>
    </div>

    <!-- üîê Seguran√ßa e Pagamentos -->
    <div class="privacy-category">
      <h3 class="privacy-category__title">üîê Seguran√ßa e Pagamentos</h3>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Salvar m√©todos de pagamento</span>
            <span class="toggle-description">
              Armazenar cart√µes de forma segura para compras futuras
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="savePaymentMethods">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Checkout r√°pido</span>
            <span class="toggle-description">
              Finalizar compras com um clique usando dados salvos (requer pagamentos salvos)
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="quickCheckout"
              [disabled]="!privacyForm.get('savePaymentMethods')?.value">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Alertas de rastreamento de pedidos</span>
            <span class="toggle-description">
              Notifica√ß√µes autom√°ticas sobre atualiza√ß√µes no status da entrega
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="orderTrackingAlerts">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>
    </div>

    <!-- üìä Compartilhamento de Dados -->
    <div class="privacy-category">
      <h3 class="privacy-category__title">üìä Compartilhamento de Dados</h3>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Compartilhamento de dados para analytics</span>
            <span class="toggle-description">
              Dados an√¥nimos para melhorar produtos, ofertas e experi√™ncia do usu√°rio
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="dataSharing">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Marketing de parceiros</span>
            <span class="toggle-description">
              Receber ofertas e promo√ß√µes de marcas parceiras selecionadas
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="thirdPartyMarketing">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>

      <div class="toggle-group">
        <label class="toggle-label">
          <div class="toggle-content">
            <span class="toggle-title">Rastreamento de navega√ß√£o</span>
            <span class="toggle-description">
              Cookies para personalizar an√∫ncios e recomenda√ß√µes baseadas no seu comportamento
            </span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" formControlName="browserTracking">
            <span class="toggle-slider"></span>
          </label>
        </label>
      </div>
    </div>

  </form>

  <div class="settings-footer">
    <div class="save-indicator" *ngIf="isLoading() || lastSaved()">
      <span *ngIf="isLoading()" class="save-status saving">
        <span class="spinner"></span>
        Salvando configura√ß√µes...
      </span>
      <span *ngIf="lastSaved() && !isLoading()" class="save-status saved">
        ‚úì Configura√ß√µes salvas {{ lastSaved() | date:'HH:mm:ss' }}
      </span>
    </div>

    <div class="privacy-info">
      <h4>üîí Sua Privacidade no E-commerce</h4>
      <ul>
        <li><strong>Seus dados de pagamento s√£o sempre criptografados</strong> e seguimos os mais altos padr√µes de
          seguran√ßa</li>
        <li><strong>Nunca compartilhamos informa√ß√µes de cart√£o de cr√©dito</strong> com terceiros</li>
        <li><strong>Voc√™ pode exportar ou excluir seus dados</strong> a qualquer momento na se√ß√£o "Zona de Risco"</li>
        <li><strong>Configura√ß√µes de marketing podem ser ajustadas</strong> individualmente para cada tipo de
          comunica√ß√£o</li>
      </ul>
    </div>
  </div>
</div>