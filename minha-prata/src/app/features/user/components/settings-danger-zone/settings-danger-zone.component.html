<div class="settings-section">
  <div class="settings-section__header">
    <h2 class="settings-section__title">Zona de Risco</h2>
  </div>

  <div class="danger-warning">
    <div class="danger-warning__icon">âš ï¸</div>
    <div class="danger-warning__content">
      <h3 class="danger-warning__title">AtenÃ§Ã£o: AÃ§Ãµes IrreversÃ­veis</h3>
      <p class="danger-warning__description">
        As aÃ§Ãµes nesta seÃ§Ã£o sÃ£o permanentes e nÃ£o podem ser desfeitas.
        Proceda com extrema cautela.
      </p>
    </div>
  </div>

  <!-- EstatÃ­sticas da Conta -->
  <div class="account-stats">
    <h4 class="stats-title">ğŸ“Š Resumo da Sua Conta</h4>
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-number">{{ getAccountStats().totalOrders }}</span>
        <span class="stat-label">Pedidos Realizados</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ getAccountStats().accountAge }}</span>
        <span class="stat-label">Tempo de Conta</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ getAccountStats().wishlistItems }}</span>
        <span class="stat-label">Itens na Lista</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ getAccountStats().addresses }}</span>
        <span class="stat-label">EndereÃ§os</span>
      </div>
    </div>
  </div>

  <!-- ğŸ”¹ ExportaÃ§Ã£o de Dados -->
  <div class="danger-action">
    <div class="danger-action__info">
      <h3 class="danger-action__title">ğŸ“¥ Exportar Seus Dados</h3>
      <p class="danger-action__description">
        Baixe uma cÃ³pia completa de todos os seus dados pessoais armazenados em nossa plataforma.
        Inclui pedidos, perfil, configuraÃ§Ãµes, histÃ³rico de atividades e muito mais.
      </p>
      <ul class="danger-action__list">
        <li>Perfil e informaÃ§Ãµes pessoais</li>
        <li>HistÃ³rico completo de pedidos</li>
        <li>EndereÃ§os cadastrados</li>
        <li>MÃ©todos de pagamento salvos</li>
        <li>PreferÃªncias e configuraÃ§Ãµes</li>
        <li>HistÃ³rico de atividades</li>
      </ul>
    </div>
    <button class="btn btn--outline" (click)="exportData()" [disabled]="isExporting()">
      <span *ngIf="isExporting()" class="btn__spinner"></span>
      {{ isExporting() ? 'Preparando Dados...' : 'Exportar Dados' }}
    </button>
  </div>

  <!-- ğŸ”¹ ExclusÃ£o de Conta -->
  <div class="danger-action danger-action--critical">
    <div class="danger-action__info">
      <h3 class="danger-action__title">ğŸ—‘ï¸ Excluir Conta Permanentemente</h3>
      <p class="danger-action__description">
        <strong>Esta aÃ§Ã£o nÃ£o pode ser desfeita.</strong> Todos os seus dados serÃ£o permanentemente
        removidos de nossos sistemas. VocÃª perderÃ¡ acesso a:
      </p>
      <ul class="danger-action__list danger-action__list--critical">
        <li>Todo o histÃ³rico de pedidos e compras</li>
        <li>EndereÃ§os e informaÃ§Ãµes de entrega</li>
        <li>MÃ©todos de pagamento salvos</li>
        <li>Listas de desejos e favoritos</li>
        <li>ConfiguraÃ§Ãµes e preferÃªncias pessoais</li>
        <li>Dados de uso e estatÃ­sticas</li>
      </ul>
      <p class="danger-action__warning">
        âš ï¸ <strong>AtenÃ§Ã£o:</strong> Esta aÃ§Ã£o Ã© irreversÃ­vel. ApÃ³s a exclusÃ£o, nÃ£o serÃ¡ possÃ­vel
        recuperar nenhum dado.
      </p>
    </div>
    <button class="btn btn--danger" (click)="openDeleteConfirmation()" [disabled]="isDeleting()">
      Excluir Minha Conta
    </button>
  </div>

  <!-- ğŸ”¹ Alternativas -->
  <div class="danger-alternatives">
    <h4 class="alternatives-title">ğŸ’¡ Antes de Excluir, Considere:</h4>
    <div class="alternatives-grid">
      <div class="alternative-item">
        <span class="alternative-icon">ğŸ“§</span>
        <div class="alternative-content">
          <h5>Alterar PreferÃªncias</h5>
          <p>Ajuste configuraÃ§Ãµes de privacidade e notificaÃ§Ãµes</p>
        </div>
      </div>
      <div class="alternative-item">
        <span class="alternative-icon">ğŸ”•</span>
        <div class="alternative-content">
          <h5>Pausar NotificaÃ§Ãµes</h5>
          <p>Desative comunicaÃ§Ãµes sem excluir a conta</p>
        </div>
      </div>
      <div class="alternative-item">
        <span class="alternative-icon">ğŸ‘¤</span>
        <div class="alternative-content">
          <h5>Exportar Dados Primeiro</h5>
          <p>FaÃ§a backup das suas informaÃ§Ãµes antes de qualquer aÃ§Ã£o</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ğŸ”¹ Modal de ExportaÃ§Ã£o ConcluÃ­da -->
<div *ngIf="showExportModal()" class="modal-overlay">
  <div class="modal modal--success">
    <div class="modal__header">
      <h3>âœ… ExportaÃ§Ã£o ConcluÃ­da!</h3>
      <button class="modal__close" (click)="closeExportModal()">Ã—</button>
    </div>

    <div class="modal__content">
      <div class="export-success">
        <div class="success-icon">ğŸ“¥</div>
        <p><strong>Seus dados foram preparados com sucesso!</strong></p>
        <p>O arquivo contÃ©m todas as suas informaÃ§Ãµes em formato JSON.</p>

        <div class="export-details">
          <h4>O que estÃ¡ incluÃ­do:</h4>
          <ul>
            <li>Perfil e informaÃ§Ãµes pessoais</li>
            <li>HistÃ³rico completo de pedidos</li>
            <li>EndereÃ§os e mÃ©todos de pagamento</li>
            <li>ConfiguraÃ§Ãµes e preferÃªncias</li>
            <li>Atividades e histÃ³rico de uso</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="modal__actions">
      <button class="btn btn--secondary" (click)="closeExportModal()">
        Fechar
      </button>
      <button class="btn btn--primary" (click)="simulateDownload()">
        ğŸ“¥ Baixar Arquivo
      </button>
    </div>
  </div>
</div>

<!-- ğŸ”¹ Modal de ConfirmaÃ§Ã£o de ExclusÃ£o -->
<div *ngIf="showDeleteModal()" class="modal-overlay">
  <div class="modal modal--danger">
    <div class="modal__header">
      <h3>âš ï¸ Confirmar ExclusÃ£o de Conta</h3>
      <button class="modal__close" (click)="closeDeleteModal()">Ã—</button>
    </div>

    <div class="modal__content">
      <div class="delete-warning">
        <div class="warning-icon">ğŸš¨</div>
        <p><strong>Esta aÃ§Ã£o Ã© permanente e nÃ£o pode ser desfeita!</strong></p>

        <div class="consequences-list">
          <h4>VocÃª perderÃ¡ permanentemente:</h4>
          <ul>
            <li>Todo o histÃ³rico de pedidos e compras</li>
            <li>EndereÃ§os cadastrados e preferÃªncias de entrega</li>
            <li>MÃ©todos de pagamento salvos</li>
            <li>Listas de desejos e produtos favoritados</li>
            <li>ConfiguraÃ§Ãµes pessoais e preferÃªncias</li>
            <li>Dados de uso, estatÃ­sticas e histÃ³rico</li>
          </ul>
        </div>

        <div class="confirmation-step">
          <p>Para confirmar, digite exatamente: <strong>"{{ requiredText }}"</strong></p>
          <input #confirmInput type="text" [value]="confirmationText()"
            (input)="confirmationText.set($any($event.target).value)" placeholder='Digite "EXCLUIR MINHA CONTA"'
            class="confirmation-input"
            [class.confirmation-input--error]="confirmationText() && confirmationText() !== requiredText">

          <p *ngIf="confirmationText() && confirmationText() !== requiredText" class="confirmation-error">
            âŒ O texto nÃ£o corresponde. Digite exatamente como mostrado.
          </p>
        </div>
      </div>
    </div>

    <div class="modal__actions">
      <button class="btn btn--secondary" (click)="closeDeleteModal()">
        Cancelar
      </button>
      <button class="btn btn--danger" (click)="deleteAccount()" [disabled]="!canDeleteAccount()">
        <span *ngIf="isDeleting()" class="btn__spinner"></span>
        {{ isDeleting() ? 'Excluindo...' : 'Sim, Excluir Minha Conta Permanentemente' }}
      </button>
    </div>
  </div>
</div>