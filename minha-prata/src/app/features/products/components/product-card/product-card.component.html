<div class="product-card" (click)="onCardClick()" (keydown.enter)="onCardClick()" (keydown.space)="onCardClick()"
  tabindex="0" role="button" [attr.aria-label]="'Ver detalhes do produto ' + product.name">
  <div class="product-img">
    <img [src]="product.imgUrl" [alt]="'Produto: ' + product.name" class="product-image">
    <div class="product-badge" *ngIf="product.inStock === false">
      Esgotado
    </div>
  </div>

  <div class="product-content">
    <h3 class="product-name">{{ product.name }}</h3>
    <p class="product-description">{{ product.description }}</p>

    <div class="product-category">
      {{ product.category.name }}
    </div>

    <div class="product-options-preview" *ngIf="product.options && product.options.length > 0">
      <div class="option-tags">
        <span class="option-tag" *ngFor="let option of product.options">
          {{ option.name }}: {{ option.values.length }} opções
        </span>
      </div>
    </div>

    <div class="product-price">R$ {{ product.price.toFixed(2) }}</div>

    <div class="product-actions">
      <button class="btn-view-details" (click)="onViewDetails($event)"
        [attr.aria-label]="'Ver detalhes de ' + product.name">
        Ver Detalhes
      </button>

      <!-- ATUALIZADO: Agora chama onAddToCart com event -->
      <button class="btn-add-cart" (click)="onAddToCart($event)" [disabled]="!product.inStock"
        [attr.aria-label]="'Adicionar ' + product.name + ' ao carrinho'">
        <i class="fa-solid fa-cart-plus"></i>
      </button>
    </div>
  </div>
</div>