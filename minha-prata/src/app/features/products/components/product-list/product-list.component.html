<div class="product-list-container">
  <!-- Header de resultados da busca - MELHORADO -->
  <div class="search-results-header" *ngIf="isSearching || searchTerm">
    <div class="search-info">
      <h3 *ngIf="searchResultsCount > 0">
        🔍 {{ searchResultsCount }} produto(s) encontrado(s) para "{{ searchTerm }}"
      </h3>
      <h3 *ngIf="searchResultsCount === 0 && searchTerm">
        🔍 Nenhum produto encontrado para "{{ searchTerm }}"
      </h3>
      <button class="clear-search-btn" (click)="clearSearch()" *ngIf="searchTerm">
        ✕ Limpar busca
      </button>
    </div>
  </div>

  <!-- ✅ NOVA SEÇÃO: Informações de exibição dinâmica -->
  <div class="display-info" *ngIf="!loading && displayedProducts.length > 0">
    <p class="display-text">{{ displayText }}</p>

    <!-- ✅ Indicador visual de busca ativa -->
    <div class="search-indicator" *ngIf="isShowingSearchResults">
      <span class="search-badge">🔍 Busca Ativa</span>
    </div>
  </div>

  <!-- Estados de loading -->
  <div class="loading-state" *ngIf="loading">
    <div class="loading-spinner"></div>
    <p>Carregando produtos...</p>
  </div>

  <!-- Estado vazio - MELHORADO -->
  <div class="empty-state" *ngIf="!loading && displayedProducts.length === 0">
    <i class="fa-solid fa-box-open"></i>

    <!-- ✅ Mensagem contextual baseada no estado -->
    <h3 *ngIf="isShowingSearchResults && searchResultsCount === 0">
      Nenhum resultado para "{{ searchTerm }}"
    </h3>
    <h3 *ngIf="!isShowingSearchResults">
      Nenhum produto encontrado
    </h3>

    <p *ngIf="isShowingSearchResults && searchResultsCount === 0">
      Tente buscar por outro termo ou verifique a ortografia
    </p>
    <p *ngIf="!isShowingSearchResults && categoryFilter !== 'all'">
      Não há produtos na categoria selecionada no momento
    </p>
    <p *ngIf="!isShowingSearchResults && categoryFilter === 'all'">
      Não há produtos disponíveis no momento
    </p>

    <!-- ✅ Botão contextual -->
    <button class="clear-search-btn" (click)="clearSearch()" *ngIf="isShowingSearchResults">
      ✕ Limpar busca
    </button>
  </div>

  <!-- Grid de produtos -->
  <div class="product-grid" *ngIf="!loading && displayedProducts.length > 0">
    <app-product-card *ngFor="let product of displayedProducts" [product]="product" (click)="onProductClick(product)">
    </app-product-card>
  </div>

  <!-- Paginação simples - MELHORADA -->
  <div class="simple-pagination" *ngIf="!loading && displayedProducts.length > 0 && totalPages > 1">
    <div class="pagination-info">
      <!-- ✅ Substitui o texto estático pelo dinâmico -->
      <span>{{ displayText }}</span>
    </div>

    <div class="pagination-controls">
      <button (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1" class="pagination-btn">
        ‹ Anterior
      </button>

      <div class="page-numbers">
        <button *ngFor="let page of [].constructor(totalPages); let i = index" (click)="onPageChange(i + 1)"
          [class.active]="currentPage === i + 1" class="pagination-btn page-btn">
          {{ i + 1 }}
        </button>
      </div>

      <button (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages" class="pagination-btn">
        Próxima ›
      </button>
    </div>
  </div>
</div>